<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Local static application</title>
</head>
<body>
    <div id="data"></div>
    <iframe src="https://docs.google.com/document/d/1phyw1Ujb2_BZ7XP1oF4z_UgIQcImah1cCt7-N9NWKMo/edit?usp=sharing" frameborder="0" marginwidth="100" marginheight="100" width="100%" height="1000"></iframe>
    <script src="//api.bitrix24.com/api/v1/"></script>
    <script>
        // Make a call to REST when JS SDK is loaded
        BX24.init(function(){
            
            var date1 = prompt("Введите дату ДО в формате '2021-06-21'");
            var date2 = prompt("Введите дату ПОСЛЕ в формате '2021-06-22'");
            BX24.callMethod("crm.contact.list",  { 
                order: { "DATE_CREATE": "ASC" },
                filter: { ">DATE_CREATE": date1, "<DATE_CREATE": date2 },
                select: [ "ID", "NAME", "LAST_NAME", "TYPE_ID", "SOURCE_ID", "PHONE" ]
            }, function(res){
                var outputString = `№_ ID___ NAME____ LAST_NAME__ PHONE____<br> \n`;
                var x;
                var phones = "";
                var counter = 1;
                (res.data()).forEach(element => {
                    phones = "";
                    if(Object.keys(element).includes('PHONE')){
                        x = element.PHONE;
                        x.forEach(elx => {
                            phones = phones + " " + elx.VALUE;
                        });
                    } else {
                        console.log(element.ID + " has not PHONE")
                    }
                    outputString = outputString + counter + " " + element.ID + " " + element.NAME + " " + element.LAST_NAME + " " + phones + `; <br> \n`;
                    counter = counter + 1;
                });
            
                document.getElementById('data').innerHTML = outputString;
                console.log(res.data());
            });

            console.log('B24 SDK is ready!', BX24.isAdmin());

        });
    </script>